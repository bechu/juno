<!DOCTYPE html>
<html>
    <head>
        <title>JuNo</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    </head>
    <body>
        <script src="js/jquery-1.9.1.min.js"></script>
        <script src="js/bootstrap.min.js"></script>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span2">
            <div id="players"></div>
                    <a href="disconnect" class="btn btn-large btn-primary" type="button">Se déconnecter</a> 
        <hr />
        <button class="btn btn-large btn-primary" type="button" onClick="deal();">Distribuer</button> 
        <hr />
        <button class="btn btn-large btn-success" type="button" onClick="done();">Terminer</button> 
        <button class="btn btn-large btn-success" type="button" onClick="uno();">Uno</button> 
        <hr />
    </div>
    <div class="span10">       
<div class="alert alert-info" id="deck">
        <img id="deckimage" src="/back/" />
        <button class="btn btn-info" type="button" onClick="pick();"><object data="/back/" type="image/svg+xml"></object> NB :  0</button>
</div>

<div class="alert alert-error" id="message">
  ...
</div>


            <div id="myhand">
            </div>
    </div>
  </div>
</div>

<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>
 
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
  <div class="modal-body">
    <p> Quelle couleur ? </p>
    <a href="#" onClick="alert('jjj');"><img src="/card/green/:)" width="100" /></a>
    <img src="/card/red/:)" width="100" onClick="alert('eer');" />
    <img src="/card/yellow/:)" width="100" onClick="alert('eer');" />
    <img src="/card/blue/:)" width="100" onClick="alert('eer');" />
  </div>
</div>


         <script type="text/javascript" language="javascript">
         updatePlayers  = function() {
                     var request = $.ajax({
                     url: "game/update",
                     dataType: "html"
                 });
                 request.done(function(msg) {
                     $("#players").html( msg );
                 });
        }
        updateHand  = function() {
                     var request = $.ajax({
                     url: "game/myhand",
                     dataType: "html"
                 });
                 request.done(function(msg) {
                    if(msg.length > 0)
                        $("#myhand").html( msg );
                 });
        }
        updateDeck  = function() {
                     var request = $.ajax({
                     url: "game/deck",
                     dataType: "html"
                 });
                 request.done(function(msg) {
                    console.log(msg);
                    console.log($("#deckimage").attr("data"));
                    $("#deckimage").attr("src", msg);
                    console.log($("#deckimage").attr("data"));
                 });
        }
        deal  = function() {
                     var request = $.ajax({
                     url: "/game/deal",
                         dataType: "html"
                 });
        }

        play  = function(index) {
                            console.log('test ' +index);
                    var request = $.ajax({
                    url: "/game/play/"+index,
                    dataType: "html"
                 });
                 request.done(function(msg) {
                    $("#message").html( msg );
                 });

        }
        
        playSpec  = function(index, color) {
                  alert(color);
        }

        pick  = function() {
                     var request = $.ajax({
                     url: "game/pick/",
                     dataType: "html"
                 });
                 request.done(function(msg) {
                    if(msg.length > 0)
                        if(msg.length != $("#deck").html().length)
                            $("#message").html( msg );
                 });

        }

             $(document).ready(function () {
                updatePlayers();
                setInterval(function() {updateHand();updatePlayers();updateDeck()}, 1000); 
             });


         </script>
    </body>
</html>
